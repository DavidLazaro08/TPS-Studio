<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.tpsstudio.view.MainViewController"
            prefWidth="1400" prefHeight="800" styleClass="root">
    
    <!-- TOOLBAR SUPERIOR -->
    <top>
        <VBox>
            <HBox alignment="CENTER_LEFT" styleClass="toolbar" spacing="10">
                <padding>
                    <Insets top="8" bottom="8" left="12" right="12" />
                </padding>
                
                <!-- Toggle Edit/Export Mode -->
                <fx:define>
                    <ToggleGroup fx:id="modeToggleGroup" />
                </fx:define>
                
                <ToggleButton fx:id="btnModeEdit" text="ðŸŽ¨ DiseÃ±o" toggleGroup="$modeToggleGroup" 
                              onAction="#onModeEdit" styleClass="mode-toggle" />
                <ToggleButton fx:id="btnModeExport" text="ðŸ“¦ ProducciÃ³n" toggleGroup="$modeToggleGroup" 
                              onAction="#onModeExport" styleClass="mode-toggle" selected="true" />
                
                <Separator orientation="VERTICAL" />
                
                <!-- Acciones de archivo (solo en modo EXPORT) -->
                <Button fx:id="btnNuevo" text="Nuevo" onAction="#onNuevoProyecto" styleClass="toolbar-btn" />
                <Button fx:id="btnAbrir" text="Abrir" onAction="#onAbrirProyecto" styleClass="toolbar-btn" />
                <Button fx:id="btnGuardar" text="Guardar" onAction="#onGuardarProyecto" styleClass="toolbar-btn" />
                <Button fx:id="btnExportar" text="Exportar" onAction="#onExportarProyecto" styleClass="toolbar-btn" />
                
                <Separator orientation="VERTICAL" />
                
                <!-- Controles de zoom -->
                <Button text="-" onAction="#onZoomOut" styleClass="toolbar-btn-small" />
                <Label fx:id="lblZoom" text="100%" styleClass="toolbar-label" />
                <Button text="+" onAction="#onZoomIn" styleClass="toolbar-btn-small" />
                
                <Separator orientation="VERTICAL" />
                
                <!-- Toggle Frente/Dorso -->
                <ToggleButton fx:id="toggleFrenteDorso" text="Frente" onAction="#onToggleFrenteDorso" 
                              styleClass="toolbar-toggle" selected="true" />
                
                <Separator orientation="VERTICAL" />
                
                <!-- Toggle GuÃ­as -->
                <ToggleButton fx:id="toggleGuias" text="GuÃ­as" onAction="#onToggleGuias" 
                              styleClass="toolbar-toggle" selected="true" />
            </HBox>
        </VBox>
    </top>
    
    <!-- ÃREA DE TRABAJO -->
    <center>
        <BorderPane>
            
            <!-- PANEL IZQUIERDO DINÃMICO -->
            <left>
                <VBox fx:id="leftPanel" styleClass="side-panel" prefWidth="220" />
            </left>
            
            <!-- CENTRO: Canvas de ediciÃ³n -->
            <center>
                <StackPane fx:id="canvasContainer" styleClass="canvas-area">
                    <Canvas fx:id="canvas" width="900" height="600" />
                </StackPane>
            </center>
            
            <!-- PANEL DERECHO DINÃMICO -->
            <right>
                <VBox fx:id="rightPanel" styleClass="side-panel" prefWidth="280" />
            </right>
            
        </BorderPane>
    </center>
    
</BorderPane>
